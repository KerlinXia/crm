<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Layui的核心css文件 -->
    <link rel="stylesheet" href="../layui/css/layui.css">
    <link rel="stylesheet" href="../css/1.css">
    <!-- Layui的核心js文件 -->
    <script src="../layui/layui.js"></script>
    
    
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>

  <div class="layui-card" style="margin: 25px;">
    <div class="layui-card-header">部门管理</div>
    <div class="layui-card-body">
      <button type="button" class="layui-btn" id="add">
        <i class="layui-icon">&#xe608;</i> 添加
      </button>

      <table id="demo" lay-filter="test"></table>
    </div>
  </div>
  <script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
  </script>

    
              
    

  <script>
      layui.use(['table','layer'], function(){
        var table = layui.table
        ,layer = layui.layer;


        //第一个实例
        table.render({
          elem: '#demo'
          ,height: 312
          ,parseData: function(res){ //res 即为原始返回的数据
              return {
              "code": res.status, //解析接口状态
              "msg": res.msg, //解析提示文本
              "count": res.total, //解析数据长度
              "data": res.data //解析数据列表
              };
          }
          ,response: {
            statusName: 'code' //规定数据状态的字段名称，默认：code
            ,statusCode: 200 //规定成功的状态码，默认：0
            ,msgName: 'msg' //规定状态信息的字段名称，默认：msg
            ,countName: 'count' //规定数据总数的字段名称，默认：count
            ,dataName: 'data' //规定数据列表的字段名称，默认：data
          }
          ,url: 'http://localhost:8080/department/selectAll' //数据接口
          ,page: true //开启分页
          ,cols: [[ //表头
             {field: 'id', title: '编号', width:250, sort: true, fixed: 'left'}
            ,{field: 'name', title: '部门名称', width:250}
            ,{field: 'sn', title: '部门编号', width:250}
            ,{field: '', title: '操作', width: 250,toolbar: '#barDemo'}
          ]]
        })
        

        //监听行工具事件
        table.on('tool(test)', function(obj){
          var data = obj.data;
          console.log(obj)
          //删除操作
          if(obj.event === 'del'){
            layer.confirm('真的删除行么', function(index){
              url: 'http://localhost:8080/department/selectAll'
              obj.del();
              layer.close(index);
            });
          } else if(obj.event === 'edit'){
            layer.prompt({
              formType: 2
              ,value: data.email
            }, function(value, index){
              obj.update({
                email: value
              });
              layer.close(index);
            });
          }
        })
      });
  </script>

</body>
</html>